name: üë• Gerenciar Inscri√ß√µes de Estudantes
description: Adicionar ou remover estudantes de atividades existentes
title: "[Inscri√ß√µes]: "
labels: ["enhancement", "registration"]
assignees:
  - copilot

body:
  - type: markdown
    attributes:
      value: |
        ## üë• Gerenciamento de Inscri√ß√µes
        
        Use este formul√°rio para adicionar ou remover estudantes de atividades de forma bulk (em lote).

  - type: input
    id: activity-name
    attributes:
      label: Nome da Atividade
      description: Nome exato da atividade (como aparece no sistema)
      placeholder: "Ex: Clube de Xadrez"
    validations:
      required: true

  - type: dropdown
    id: action-type
    attributes:
      label: Tipo de A√ß√£o
      description: O que voc√™ deseja fazer?
      options:
        - Adicionar estudantes
        - Remover estudantes
        - Limpar todas as inscri√ß√µes
    validations:
      required: true

  - type: textarea
    id: student-emails
    attributes:
      label: Lista de E-mails dos Estudantes
      description: Um e-mail por linha. Use apenas para adicionar ou remover estudantes.
      placeholder: |
        joao.silva@mergington.edu
        maria.santos@mergington.edu
        pedro.oliveira@mergington.edu
      render: text
    validations:
      required: false

  - type: textarea
    id: reason
    attributes:
      label: Motivo da Altera√ß√£o
      description: Explique brevemente por que estas altera√ß√µes s√£o necess√°rias
      placeholder: "Ex: Estudantes solicitaram transfer√™ncia para outra atividade"
    validations:
      required: true

  - type: checkboxes
    id: confirmations
    attributes:
      label: Confirma√ß√µes
      description: Confirme que voc√™ revisou as informa√ß√µes
      options:
        - label: Verifiquei que os e-mails dos estudantes est√£o corretos
          required: true
        - label: Confirmo que tenho autoriza√ß√£o para fazer estas altera√ß√µes
          required: true
        - label: Entendo que esta a√ß√£o afetar√° as inscri√ß√µes dos estudantes
          required: true

  - type: textarea
    id: additional-context
    attributes:
      label: Informa√ß√µes Adicionais
      description: Qualquer outra informa√ß√£o relevante
    validations:
      required: false

  - type: markdown
    attributes:
      value: |
        ---
        
        ## üìù Crit√©rios de Aceita√ß√£o
        
        A opera√ß√£o ser√° considerada conclu√≠da quando:
        - ‚úÖ Todos os estudantes listados forem adicionados/removidos conforme solicitado
        - ‚úÖ A contagem de vagas estiver correta
        - ‚úÖ A lista de participantes estiver atualizada na interface
        - ‚úÖ Nenhum erro de valida√ß√£o ocorrer (emails inv√°lidos, capacidade excedida)
        - ‚úÖ As valida√ß√µes de neg√≥cio forem respeitadas (capacidade m√°xima, duplicatas)
        
        ## üîß Contexto T√©cnico
        
        **Arquivos que podem precisar ser modificados:**
        - `src/main/java/com/mergingtonhigh/schoolmanagement/infrastructure/migrations/` - Para altera√ß√µes em lote
        - `src/main/java/com/mergingtonhigh/schoolmanagement/application/usecases/StudentRegistrationUseCase.java` - Para l√≥gica de inscri√ß√£o
        
        **Dicas para o agente de codifica√ß√£o:**
        - Para adicionar: Use o m√©todo `Activity.addParticipant(Email)` que valida capacidade e duplicatas
        - Para remover: Use o m√©todo `Activity.removeParticipant(Email)` que valida se o estudante est√° inscrito
        - Para limpar: Use `Activity.setParticipants(new ArrayList<>())`
        - Crie uma migra√ß√£o Mongock se for uma opera√ß√£o em lote
        - Valide todos os e-mails usando a classe `Email` do pacote `domain.valueobjects`
        - Use `mongoTemplate.updateFirst()` para atualizar a atividade no banco
        - Implemente rollback para poder reverter a opera√ß√£o se necess√°rio
        - Considere criar um endpoint REST se esta for uma opera√ß√£o frequente
